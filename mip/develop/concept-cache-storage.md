---
title: Concepts - Cache storage
description: This article will help you understand the concepts around cache storage in MIP SDK.
author: tommoser
ms.service: information-protection
ms.topic: conceptual
ms.collection: M365-security-compliance
ms.date: 07/30/2019
ms.author: tommos
---

# Microsoft Information Protection SDK - Cache storage

The MIP SDK implements a SQLite3 database for maintaining cache storage. Prior to version 1.3 of the Microsoft Information Protection SDK, only two types of cache state storage were supported: On disk and in memory. Both of these types stored certain data, specifically licenses for protected content and policy information, in plaintext.

To improve the security of the SDK, we added support for a second type of on disk cache that uses platform-specific cryptographic APIs to protect the database and its contents.

Starting in MIP SDK release 1.3, the following storage cache types are available. The application defines the cache type when loading the profile as part of the `FileProfileSettings`, `PolicyProfileSettings`, or `ProtectionProfileSettings` objects. The cache type is static for the life of the profile. Changing to a different type of cache storage type requires destroying the existing profile and creating a new one.

## Cache storage types

| Type            | Purpose                                                                                                                         |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------- |
| InMemory        | Maintains the storage cache in memory in the application.                                                                       |
| OnDisk          | Stores the database on disk in the directory provided in the settings object. The database is stored in plaintext.              |
| OnDiskEncrypted | Stores the database on disk in the directory provided in the settings object. The database is encrypted using OS-specific APIs. |

Each **engine** generated by the application will generate a new encryption key.

## When to use each type

Cache storage is important for maintaining offline access to previously-decrypted information, as well as ensuring performance for decryption operations when data has been previously consumed.



## Supported platforms for cache storage encryption

| Platform                | Version             | Notes                                            |
| ----------------------- | ------------------- | ------------------------------------------------ |
| Microsoft Windows       | Windows 8 and newer | Windows 7 supports only CacheStorageType::OnDisk |
| macOS                   |                     |                                                  |
| Ubuntu Linux            | 16.04 and later     |                                                  |
| RedHat Enterprise Linux | 7.5                 |                                                  |
| Debian                  | 9.0                 |                                                  |
| Android                 | API 23 or later     |                                                  |
| iOS                     |                     |                                                  |

## Cache storage tables

The MIP SDK maintains two databases for cache. One is for the protection APIs, and maintaining protection state details. The other is for the policy APIs and maintaining policy details and service information. Both are stored in the path defined in the settings object, under **mip\mip.policies.sqlite3** and **mip\mip.protection.sqlite3**.

### Protection Database

| Table         | Purpose                                                        | Encrypted |
| ------------- | -------------------------------------------------------------- | --------- |
| AuthInfoStore | Stores authentication challenge details.                       | No        |
| ConsentStore  | Stores consent results for each engine.                        | No        |
| DnsInfoStore  | Stores DNS lookup results for SDK protection operations        | No        |
| EngineStore   | Stores engine details, associated user, and custom client data | No        |
| KeyStore      | Stores symmetric encryption keys for each engine.              | Yes       |
| LicenseStore  | Stores use license information for previously decrypted data.  | Yes       |
| SdInfoStore   |                                                                |           |

### Policy Database

| Table           | Purpose                                                          | Encrypted |
| --------------- | ---------------------------------------------------------------- | --------- |
| KeyStore        | Stores symmetric encryption keys for each engine.                | Yes       |
| Policies        | Stores label policy information for each user.                   | Yes       |
| PoliciesUrl     | Stores backend policy service URL for specific user.             | No        |
| Sensitivity     | Stores classification rules for a specific user policy.          | Yes       |
| SensitivityUrls | Stores backend sensitivity policy service URL for specific user. | Yes       |

## Database size considerations


